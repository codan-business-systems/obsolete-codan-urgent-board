<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core" >
	<ResponsivePopover
		busy="{viewModel>/state/busy}"
		busyIndicatorDelay="0"
		placement="Left"
		title="Item details">
		<content>
			<form:Form
				editable="true"
				class="editableForm">
				<form:layout>
					<form:ResponsiveGridLayout
						labelSpanL="3"
						labelSpanM="3"
						emptySpanL="0"
						emptySpanM="0"
						columnsL="1"
						columnsM="1"/>
				</form:layout>
				<form:formContainers>
					<form:FormContainer>
						<form:formElements>
							<form:FormElement label="{viewModel>/fields/quantity/label}">
								<form:fields>
									<Input
										type="Number"
										value="{quantity}"
										change="onItemFieldChange"
										valueState="{viewModel>/fields/quantity/valueState}"
										valueStateText="{viewModel>/fields/quantity/valueStateText}"/>
								</form:fields>
							</form:FormElement>
							<form:FormElement label="{viewModel>/fields/deliverTo/label}">
								<form:fields>
									<Input
										type="Text"
										value="{deliverTo}"
										change="onItemFieldChange"
										valueState="{viewModel>/fields/deliverTo/valueState}"
										valueStateText="{viewModel>/fields/deliverTo/valueStateText}"/>
								</form:fields>
							</form:FormElement>

							<form:FormElement label="{viewModel>/fields/comments/label}">
								<form:fields>
									<TextArea
										rows="3"
										value="{comments}"
										change="onItemFieldChange"
										valueState="{viewModel>/fields/comments/valueState}"
										valueStateText="{viewModel>/fields/comments/valueStateText}"/>
								</form:fields>
							</form:FormElement>
						</form:formElements>
					</form:FormContainer>
				</form:formContainers>
			</form:Form>
			<MessageStrip
				class="sapUiResponsiveMargin"
				visible="{= ${viewModel>/create/message/text} !== '' }"
				text="{viewModel>/create/message/text}"
				type="{viewModel>/create/message/type}"/>
			<Toolbar>
				<Button
					visible="{= !${viewModel>/itemPopover/hasError} }"
					press="sendItemEmail"
					icon="sap-icon://email"
					tooltip="Send email regarding this item"/>
				<Button
					visible="{= !${viewModel>/itemPopover/hasError} }"
					press="confirmDeleteItem"
					icon="sap-icon://delete"
					type="Reject"
					tooltip="Delete item"/>
				<ToolbarSpacer />
				<Button
					visible="{= ${viewModel>/itemPopover/hasError} }"
					press="cancelItemOverflowPopover"
					text="Cancel"/>
				<Button
					visible="{= !${viewModel>/itemPopover/hasError} }"
					press="closeItemOverflowPopover"
					text="OK"/>
			</Toolbar>
		</content>
	</ResponsivePopover>
</core:FragmentDefinition>